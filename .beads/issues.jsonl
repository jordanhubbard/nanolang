{"id":"nl-1pd","title":"Fix: -Wimplicit-function-declaration for filesystem wrapper functions in generated C","description":"Phase: C intermediate compilation (gcc/cc compiling /tmp/nanolang_temp.c)\n\nNanoLang stdlib wraps C filesystem functions that are never declared in the generated C output. The intermediate C compiler sees undeclared functions and warns about them, then defaults the return type to int — causing cascading -Wint-conversion errors.\n\nAffected functions:\n  fs_mkdir_p   (called from nl_mkdir_p wrapper)\n  path_relpath  (called from nl_relpath wrapper)\n  file_copy     (called from nl_copy_file wrapper)\n  dir_copy      (called from nl_copy_dir wrapper)\n\nExample warning output:\n  /tmp/nanolang_temp.c:578:12: warning: implicit declaration of function 'fs_mkdir_p'; did you mean 'nl_mkdir_p'? [-Wimplicit-function-declaration]\n    578 |     return fs_mkdir_p(nl_path);\n  /tmp/nanolang_temp.c:484:12: warning: implicit declaration of function 'path_relpath'; did you mean 'nl_relpath'? [-Wimplicit-function-declaration]\n    484 |     return path_relpath(nl_target, nl_base);\n  /tmp/nanolang_temp.c:583:12: warning: implicit declaration of function 'file_copy' [-Wimplicit-function-declaration]\n    583 |     return file_copy(nl_src, nl_dst);\n  /tmp/nanolang_temp.c:588:12: warning: implicit declaration of function 'dir_copy' [-Wimplicit-function-declaration]\n    588 |     return dir_copy(nl_src, nl_dst);\n\nRoot cause: The C implementations of these functions live in a module (e.g. modules/std/fs.c) but the generated C does not emit the corresponding #include for that header. The NanoLang wrappers call the raw C names without an include guard.","status":"open","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T19:46:00Z","created_by":"Jordan Hubbard","updated_at":"2026-02-21T19:46:00Z"}
{"id":"nl-2ei","title":"Fix: 'integer constant is so large that it is unsigned' in nl_checked_math gen_c_runtime","description":"Phase: C intermediate compilation (gcc/cc compiling /tmp/nanolang_temp.c)\n\nIn gen_c_runtime (transpiler.nano), the checked arithmetic functions initialize INT64_MIN as a bare decimal literal. GCC warns that the literal value 9223372036854775808 is too large for a signed integer and must be treated as unsigned.\n\nExample warning output (appears 5 times, once per checked-math function):\n  /tmp/nanolang_temp.c: In function 'nl_checked_add':\n  /tmp/nanolang_temp.c:463:31: warning: integer constant is so large that it is unsigned\n    463 |         int64_t nl_min_int = -9223372036854775808;\n        |                               ^~~~~~~~~~~~~~~~~~~\n  /tmp/nanolang_temp.c: In function 'nl_checked_sub':\n  /tmp/nanolang_temp.c:488:31: warning: integer constant is so large that it is unsigned\n    488 |         int64_t nl_min_int = -9223372036854775808;\n  (same pattern in nl_checked_mul, nl_checked_div, nl_checked_mod)\n\nFix: In transpiler.nano gen_c_runtime, replace:\n    int64_t nl_min_int = -9223372036854775808;\nwith either:\n    int64_t nl_min_int = INT64_MIN;  (requires \u003cstdint.h\u003e or \u003climits.h\u003e, already included)\nor:\n    int64_t nl_min_int = (int64_t)(-9223372036854775807LL - 1LL);\n\nINT64_MIN is preferred as it is portable and self-documenting.","status":"closed","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T19:47:10Z","created_by":"Jordan Hubbard","updated_at":"2026-02-21T20:25:30Z","closed_at":"2026-02-21T20:25:30Z","close_reason":"Closed"}
{"id":"nl-4bf","title":"[autotest] Examples build failed: make examples","description":"Autogenerated by scripts/autobeads.py\n\nKind: examples\nName: make examples\nKey: examples:make examples\nFingerprint: 052f34f63dbe\nFirst seen: 2026-02-21T12:42:36\n\n---\nLog tail: /home/jkh/Src/nanolang/.test_output/make_examples.log\n\natterns\n  ./bin/ffi_tutorial\n  ./bin/large_project_structure\n  ./bin/math_ext_demo\n  ./bin/namespace_demo\n  ./bin/performance_optimization\n  ./bin/stdio_file_processor\n  ./bin/stdlib_ast_demo\n  ./bin/testing_strategies\n  ./bin/unsafe_demo\n  ./bin/vector2d_demo\n  ./bin/vector2d_physics_simple\n\nData examples:\n  ./bin/json_demo\n\nVerified examples (formally proven):\n  ./bin/break_the_proof\n  ./bin/checksum_validator\n  ./bin/financial_order_validator\n  ./bin/medical_dosage\n  ./bin/pid_controller\n  ./bin/proof_trace\n  ./bin/sensor_voting\n  ./bin/state_machine\n  ./bin/verified_vs_unverified\n\nDebugging \u0026 Validation examples:\n  ./bin/coverage_demo\n  ./bin/logging_categories_demo\n  ./bin/logging_demo\n  ./bin/logging_levels_demo\n  ./bin/property_test_math\n  ./bin/property_test_sorting\n\nNetwork examples:\n\nPhysics examples:\n\nPlayground examples:\n\nTools \u0026 launchers:\n\nOPL examples:\n\nSDL examples (sdl_*):\n\nNCurses examples (ncurses_*):\n\nOpenGL examples (opengl_*):\n\nTo launch the example browser:\n  cd examples \u0026\u0026 make launcher\n  # or from repo root: make launcher\n\nmake[6]: Leaving directory '/home/jkh/Src/nanolang/examples'\nmake[6]: Entering directory '/home/jkh/Src/nanolang'\nmake[6]: '.bootstrap3.built' is up to date.\nmake[6]: Leaving directory '/home/jkh/Src/nanolang'\n\n==========================================\nBuilding Examples (Stage 3 Compiler)\n==========================================\nmake[6]: Entering directory '/home/jkh/Src/nanolang/examples'\nBuilding ../bin/nl_advanced_math_stage3...\n../bin/nanoc_stage2  language/nl_advanced_math.nano -o ../bin/nl_advanced_math_stage3\n/tmp/nanolang_temp.c:258:14: error: conflicting types for ‘file_read’; have ‘char *(const char *)’\n  258 | extern char* file_read(const char* path);\n      |              ^~~~~~~~~\nIn file included from /tmp/nanolang_temp.c:79:\n/home/jkh/Src/nanolang/modules/std/fs.h:27:13: note: previous declaration of ‘file_read’ with type ‘const char *(const char *)’\n   27 | const char* file_read(const char* path);\n      |             ^~~~~~~~~\n/home/jkh/Src/nanolang/modules/std/process.c: In function ‘nl_os_process_run’:\n/home/jkh/Src/nanolang/modules/std/process.c:23:21: warning: implicit declaration of function ‘mkstemp’ [-Wimplicit-function-declaration]\n   23 |     int stdout_fd = mkstemp(stdout_file);\n      |                     ^~~~~~~\nDEBUG: Parser has 12 lets, 5 functions\n=== NSType Checking (Full AST Walk) ===\nNSType checking 5 functions\n  Registering function...\n  Registering function...\n  Registering function...\n  Registering function...\n  Registering function...\n  NSType checking function test_sqrt...\nNSType checking function test_sqrt (line 9, body block ID 0)\n  NSType checking function test_pow...\nNSType checking function test_pow (line 22, body block ID 2)\n  NSType checking function test_rounding...\nNSType checking function test_rounding (line 39, body block ID 4)\n  NSType checking function test_trig...\nNSType checking function test_trig (line 64, body block ID 6)\n  NSType checking function main...\nNSType checking function main (line 83, body block ID 8)\n✓ NSType checking complete - All functions valid!\n=== Code Generation (Full AST Walk) ===\nGenerating C code for 5 functions\n  Generating: test_sqrt (return type: int)\n  Generating: test_pow (return type: int)\n  Generating: test_rounding (return type: int)\n  Generating: test_trig (return type: int)\n  Generating: main (return type: int)\n✓ Code generation complete!\nError: C compilation failed\nmake[6]: *** [Makefile:399: ../bin/nl_advanced_math_stage3] Error 1\nmake[6]: Leaving directory '/home/jkh/Src/nanolang/examples'\nmake[5]: *** [Makefile.gnu:668: examples-stage3] Error 2\nmake[5]: Leaving directory '/home/jkh/Src/nanolang'\nmake[4]: *** [Makefile:56: examples-core] Error 2\nmake[4]: Leaving directory '/home/jkh/Src/nanolang'\nmake[3]: *** [Makefile.gnu:644: examples] Error 2\nmake[3]: Leaving directory '/home/jkh/Src/nanolang'\nmake[2]: *** [Makefile:47: examples] Error 2\nmake[2]: Leaving directory '/home/jkh/Src/nanolang'\n\n","notes":"[autotest] Seen again at 2026-02-22T15:05:46\nKind: examples\nName: make examples\nFingerprint: 419eac5b7166\n\n---\nLog tail: /home/jkh/Src/nanolang/.test_output/make_examples.log\n\nock ID 6)\n  NSType checking function modulo...\nNSType checking function modulo (line 49, body block ID 8)\n  NSType checking function complex_expr...\nNSType checking function complex_expr (line 59, body block ID 10)\n  NSType checking function main...\nNSType checking function main (line 68, body block ID 12)\n✓ NSType checking complete - All functions valid!\n=== Code Generation (Full AST Walk) ===\nGenerating C code for 7 functions\n  Generating: add (return type: int)\n  Generating: subtract (return type: int)\n  Generating: multiply (return type: int)\n  Generating: divide (return type: int)\n  Generating: modulo (return type: int)\n  Generating: complex_expr (return type: int)\n  Generating: main (return type: int)\n✓ Code generation complete!\nBuilding ../bin/nl_primes_stage3...\n../bin/nanoc_stage2  language/nl_primes.nano -o ../bin/nl_primes_stage3\nDEBUG: Parser has 6 lets, 3 functions\n=== NSType Checking (Full AST Walk) ===\nNSType checking 3 functions\n  Registering function...\n  Registering function...\n  Registering function...\n  NSType checking function is_prime...\nNSType checking function is_prime (line 9, body block ID 5)\n  NSType checking function count_primes...\nNSType checking function count_primes (line 59, body block ID 9)\n  NSType checking function main...\nNSType checking function main (line 81, body block ID 13)\n✓ NSType checking complete - All functions valid!\n=== Code Generation (Full AST Walk) ===\nGenerating C code for 3 functions\n  Generating: is_prime (return type: bool)\n  Generating: count_primes (return type: int)\n  Generating: main (return type: int)\n✓ Code generation complete!\nBuilding ../bin/nl_primes_sieve_stage3...\n../bin/nanoc_stage2  language/nl_primes_sieve.nano -o ../bin/nl_primes_sieve_stage3\nDEBUG: Parser has 7 lets, 2 functions\n=== NSType Checking (Full AST Walk) ===\nNSType checking 2 functions\n  Registering function...\n  Registering function...\n  NSType checking function count_primes_sieve...\nNSType checking function count_primes_sieve (line 9, body block ID 6)\n  NSType checking function main...\nNSType checking function main (line 47, body block ID 7)\n✓ NSType checking complete - All functions valid!\n=== Code Generation (Full AST Walk) ===\nGenerating C code for 2 functions\n  Generating: count_primes_sieve (return type: int)\n  Generating: main (return type: int)\n✓ Code generation complete!\nBuilding ../bin/nl_primes_trial_division_stage3...\n../bin/nanoc_stage2  language/nl_primes_trial_division.nano -o ../bin/nl_primes_trial_division_stage3\nDEBUG: Parser has 6 lets, 3 functions\n=== NSType Checking (Full AST Walk) ===\nNSType checking 3 functions\n  Registering function...\n  Registering function...\n  Registering function...\n  NSType checking function is_prime...\nNSType checking function is_prime (line 9, body block ID 5)\n  NSType checking function count_primes...\nNSType checking function count_primes (line 24, body block ID 8)\n  NSType checking function main...\nNSType checking function main (line 36, body block ID 9)\n✓ NSType checking complete - All functions valid!\n=== Code Generation (Full AST Walk) ===\nGenerating C code for 3 functions\n  Generating: is_prime (return type: bool)\n  Generating: count_primes (return type: int)\n  Generating: main (return type: int)\n✓ Code generation complete!\nBuilding ../bin/nl_random_sentence_stage3...\n../bin/nanoc_stage2  language/nl_random_sentence.nano -o ../bin/nl_random_sentence_stage3\nParse error at line 85, column 4: unexpected token 'fn'\nmake[6]: *** [Makefile:399: ../bin/nl_random_sentence_stage3] Error 1\nmake[6]: Leaving directory '/home/jkh/Src/nanolang/examples'\nmake[5]: *** [Makefile.gnu:668: examples-stage3] Error 2\nmake[5]: Leaving directory '/home/jkh/Src/nanolang'\nmake[4]: *** [Makefile:56: examples-core] Error 2\nmake[4]: Leaving directory '/home/jkh/Src/nanolang'\nmake[3]: *** [Makefile.gnu:644: examples] Error 2\nmake[3]: Leaving directory '/home/jkh/Src/nanolang'\nmake[2]: *** [Makefile:47: examples] Error 2\nmake[2]: Leaving directory '/home/jkh/Src/nanolang'\n\n","status":"open","priority":4,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T20:42:37Z","created_by":"Jordan Hubbard","updated_at":"2026-02-22T23:05:47Z","labels":["autotest","examples"]}
{"id":"nl-5nk","title":"Fix: -Wimplicit-function-declaration for SDL/graphics/UI functions in generated C","description":"Phase: C intermediate compilation (gcc/cc compiling /tmp/nanolang_temp.c)\n\nSDL, SDL_ttf, and NanoLang graphics/UI helper functions are called in generated C without their headers being included. This affects the SDL launcher/examples demo (examples/sdl_launcher).\n\nAffected functions:\n  SDL_CreateRenderer, SDL_DestroyRenderer, SDL_DestroyWindow\n  SDL_RenderClear, SDL_RenderPresent, SDL_SetRenderDrawColor\n  TTF_CloseFont\n  nl_draw_text_blended\n  nl_img_load_png_texture, nl_img_render_texture\n  nl_sdl_render_fill_rect\n  nl_ui_panel, nl_ui_label, nl_ui_code_display_ansi\n\nExample warning output:\n  /tmp/nanolang_temp.c:6928: warning: implicit declaration of function 'SDL_CreateRenderer' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:6930: warning: implicit declaration of function 'SDL_DestroyRenderer' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:6931: warning: implicit declaration of function 'SDL_DestroyWindow' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:6998: warning: implicit declaration of function 'nl_img_load_png_texture' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7185: warning: implicit declaration of function 'SDL_SetRenderDrawColor' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7186: warning: implicit declaration of function 'SDL_RenderClear' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7187: warning: implicit declaration of function 'nl_ui_panel' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7201: warning: implicit declaration of function 'nl_sdl_render_fill_rect' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7202: warning: implicit declaration of function 'nl_draw_text_blended' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7224: warning: implicit declaration of function 'nl_img_render_texture' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7258: warning: implicit declaration of function 'nl_ui_label' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7292: warning: implicit declaration of function 'nl_ui_code_display_ansi' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7367: warning: implicit declaration of function 'SDL_RenderPresent' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:7475: warning: implicit declaration of function 'TTF_CloseFont' [-Wimplicit-function-declaration]\n\nRoot cause: The SDL launcher example uses SDL2/SDL_ttf and NanoLang SDL/UI helpers, but the generated C does not emit #include \u003cSDL2/SDL.h\u003e, #include \u003cSDL2/SDL_ttf.h\u003e, or the nl_sdl/nl_img/nl_ui helper headers. These need to be added to gen_c_includes() or emitted per-module when SDL-dependent stdlib modules are imported.","status":"open","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T19:46:32Z","created_by":"Jordan Hubbard","updated_at":"2026-02-21T19:46:32Z"}
{"id":"nl-7m9","title":"Fix: NanoLang phase 'missing shadow test' warnings for example functions","description":"Phase: NanoLang compiler type-check phase (before C code generation)\n\nThe NanoLang compiler emits a warning for every non-trivial function that lacks a shadow test. These appear during 'make examples' for functions in the examples directory.\n\nExample warning output:\n  Warning: Function 'square' is missing a shadow test\n  Warning: Function 'count_primes_sieve' is missing a shadow test\n  Warning: Function 'main' is missing a shadow test\n  Warning: Function 'is_prime' is missing a shadow test\n  Warning: Function 'count_primes' is missing a shadow test\n  Warning: Function 'double' is missing a shadow test\n  Warning: Function 'fib_step' is missing a shadow test\n  Warning: Function 'rand_range' is missing a shadow test\n  Warning: Function 'div_value' is missing a shadow test\n  Warning: Function 'div_is_err' is missing a shadow test\n  Warning: Function 'print_line' is missing a shadow test\n  Warning: Function 'print_header' is missing a shadow test\n  Warning: Function 'show_det' is missing a shadow test\n  ... (many more in examples/)\n\nAlso affects stdlib:\n  Warning: Function 'nl_path_dirname' is missing a shadow test\n  Warning: Function 'parse_import_path_from_line' is missing a shadow test\n\nFix: Add shadow test blocks to each flagged function. For example functions that are demos (main, print_header, etc.) we may want to either add minimal smoke-test shadows or configure the shadow-test warning to be opt-out for files in examples/. For stdlib functions, add proper shadow tests.","status":"open","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T19:47:24Z","created_by":"Jordan Hubbard","updated_at":"2026-02-21T19:47:24Z"}
{"id":"nl-bar","title":"Fix: -Wdiscarded-qualifiers warnings in generated C from NanoLang string-\u003echar* conversions","description":"Multiple generated C compilation warnings: 'passing argument N of func discards const qualifier from pointer target type [-Wdiscarded-qualifiers]'. NanoLang's string type is const char* but many generated function calls pass it to parameters declared as char*. This occurs throughout transpiler.nano, typecheck.nano, parser.nano generated code.","status":"open","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T19:00:08Z","created_by":"Jordan Hubbard","updated_at":"2026-02-21T19:00:08Z"}
{"id":"nl-e7m","title":"Fix: NanoLang phase 'Unused variable' warnings in compiler and stdlib sources","description":"Phase: NanoLang compiler type-check phase (before C code generation)\n\nThe NanoLang compiler emits warnings for variables that are declared but never read. There are 137 such warnings across the compiler source and stdlib. These fire during the build of nanoc_stage2 and during 'make examples'.\n\nRepresentative warning output (from compiling the main compiler source):\n  Warning at line 199, column 5: Unused variable 'name'\n  Warning at line 904, column 13: Unused variable 'cur'\n  Warning at line 6904, column 5: Unused variable 'p'\n  Warning at line 6907, column 5: Unused variable 'num'\n  Warning at line 6908, column 5: Unused variable 'id'\n  Warning at line 490, column 5: Unused variable 'context'\n  Warning at line 1268, column 1: Unused variable 'arg_count'\n  Warning at line 1461, column 1: Unused variable 'arg_count'\n  Warning at line 1846, column 1: Unused variable 'env'\n  Warning at line 2331, column 13: Unused variable 'arg_t'\n  Warning at line 2682, column 1: Unused variable 'parser'\n  Warning at line 2682, column 1: Unused variable 'symbols'\n  Warning at line 3869, column 1: Unused variable 'elem_t'\n  Warning at line 4278, column 29: Unused variable 'elem_struct'\n  ... (137 total instances)\n\nAlso from example files:\n  Warning: Unused variable 'a', 'b', 'c', 'i', 'dummy', 'debug_write', etc.\n\nFix: For each warning, either:\n  (a) Remove the unused variable declaration, or\n  (b) Use the variable (if it was meant to be used but got dropped), or\n  (c) Prefix with _ convention if NanoLang supports it to suppress intentional unused vars.\n  Start with compiler source (nanoc_integrated.nano / transpiler.nano) as highest value.","status":"open","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T19:47:37Z","created_by":"Jordan Hubbard","updated_at":"2026-02-21T19:47:37Z"}
{"id":"nl-fok","title":"Extra closing brace in typecheck.nano and transpiler.nano parse errors","description":"## Summary\n\nTwo parse errors introduced in commit 75bd6e74 due to extra closing braces in deeply nested else/if chains.\n\n## Errors\n\n1. src_nano/typecheck.nano line 2687: Extra } at end of array_elem_type_from_array_decl()\n2. src_nano/transpiler.nano line 1515: Extra } at end of array_elem_type_from_array_type()\n\nBoth functions use deeply nested 'else { if' chains and had one extra closing brace.\n\n## Fix Applied\n\nRemoved the extra closing brace from each function. Verified brace depth reaches 0 correctly.\n\n## Status: FIXED (pending commit)","status":"closed","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-19T03:08:04Z","created_by":"Jordan Hubbard","updated_at":"2026-02-19T03:08:10Z","closed_at":"2026-02-19T03:08:10Z","close_reason":"Fixed: removed extra closing braces from array_elem_type_from_array_decl() in typecheck.nano and array_elem_type_from_array_type() in transpiler.nano","labels":["compiler","fixed","parser"]}
{"id":"nl-hmt","title":"Stage1 compiler infinite loop on 'from ... import' with multiple modules","description":"## Summary\n\nThe self-hosted stage1 compiler (nanoc_stage1) enters an apparent infinite loop / exponential memory blowup when compiling files that use 'from ... import' with multiple modules. The C reference compiler (nanoc_c) compiles the same files in seconds.\n\n## Reproduction\n\n    # Hangs indefinitely (100% CPU, memory grows to \u003e3.6GB):\n    timeout 120 bin/nanoc_stage1 examples/language/simple_repl.nano -o /tmp/test_repl\n\n    # Works fine in seconds:\n    timeout 120 bin/nanoc_c examples/language/simple_repl.nano -o /tmp/test_repl\n\n## Affected Files\n\n- examples/language/simple_repl.nano (256 lines)\n- examples/language/vars_repl.nano (similar structure)\n\nBoth share the same 'from ... import' pattern:\n\n    from \"modules/readline/readline.nano\" import rl_readline, rl_add_history, ...\n    from \"modules/nano_tools/nano_tools.nano\" import eval_internal\n    from \"modules/std/collections/stringbuilder.nano\" import StringBuilder, sb_new, ...\n\n## Impact\n\n- make examples fails: examples-stage1 target hangs on simple_repl.nano, exceeding 600s CMD_TIMEOUT\n- Blocks CI autobeads.py examples workflow\n- All other examples (54+ files) compile correctly with stage1\n\n## Diagnosis\n\n- Stage1 process reaches 100% CPU and 3.6GB+ RSS compiling a 256-line file\n- C reference compiler handles the same file in \u003c5 seconds\n- Common pattern: 'from ... import' with multiple module imports\n- Standard 'module' and 'import' directives work fine in stage1\n- Issue appears to be in module resolution or code generation for 'from ... import' syntax\n\n## Environment\n\n- Commit: 75bd6e74 (feat(compiler): achieve 54/54 stage1 examples passing)\n- Platform: Linux x86_64\n- The files were NOT changed in the recent commit; pre-existing stage1 limitation\n\n## Suggested Investigation\n\n1. Check src_nano/transpiler.nano and src_nano/compiler/module_loader.nano for 'from ... import' handling\n2. Profile/trace stage1 to identify which phase loops (likely transpile or module resolution)\n3. Compare code paths for 'from X import Y' vs 'module X' in stage1\n4. Consider adding per-file timeout to examples build as workaround","notes":"Root cause: Not actually an infinite loop. Stage1 compiler completes on simple_repl.nano (C compilation fails due to HashMap\u003cstring,string\u003e codegen limitation, but NanoLang compilation succeeds). The make examples timeout was caused by: (1) SDL launcher hanging in headless mode, blocking the pipeline, (2) stale bootstrap sentinels triggering unnecessary rebuilds. Both fixed in Makefile.gnu.","status":"closed","priority":0,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-19T03:07:50Z","created_by":"Jordan Hubbard","updated_at":"2026-02-20T06:43:26Z","closed_at":"2026-02-20T06:39:55Z","labels":["compiler","p0","performance","stage1"]}
{"id":"nl-jm5","title":"[autotest] Examples build failed: make examples","description":"Autogenerated by scripts/autobeads.py\n\nKind: examples\nName: make examples\nKey: examples:make examples\nFingerprint: e4d5efb1af23\nFirst seen: 2026-02-18T19:31:07\n\n---\nLog tail: /home/jkh/Src/nanolang/.test_output/make_examples.log\n\n [-Wint-conversion]\net_string (return type: ASTString)\n  Generating: parser_get_bool_count (return type: int)\n  Generating: parser_get_bool (return type: ASTBool)\n  Generating: parser_get_assert_count (return type: int)\n  Generating: parser_get_assert (return type: ASTAssert)\n  Generating: parser_get_field_access_count (return type: int)\n  Generating: parser_get_field_access (return type: ASTFieldAccess)\n  Generating: parser_get_array_literal_count (return type: int)\n  Generating: parser_get_array_literal (return type: ASTArrayLiteral)\n  Generating: parser_set_array_literal_element_type (return type: Parser)\n  Generating: parser_get_array_element_count (return type: int)\n  Generating: parser_get_array_element (return type: ASTStmtRef)\n  Generating: parser_get_struct_def_count (return type: int)\n  Generating: parser_get_struct_def (return type: ASTStruct)\n  Generating: parser_get_struct_literal_count (return type: int)\n  Generating: parser_get_struct_literal (return type: ASTStructLiteral)\n  Generating: parser_get_enum_count (return type: int)\n  Generating: parser_get_enum (return type: ASTEnum)\n  Generating: parser_get_union_count (return type: int)\n  Generating: parser_get_union (return type: ASTUnion)\n  Generating: parser_get_union_construct_count (return type: int)\n  Generating: parser_get_union_construct (return type: ASTUnionConstruct)\n  Generating: parser_get_match_count (return type: int)\n  Generating: parser_get_match (return type: ASTMatch)\n  Generating: parser_get_tuple_literal_count (return type: int)\n  Generating: parser_get_tuple_literal (return type: ASTTupleLiteral)\n  Generating: parser_get_tuple_index_count (return type: int)\n  Generating: parser_get_tuple_index (return type: ASTTupleIndex)\n  Generating: parser_get_import_count (return type: int)\n  Generating: parser_get_import (return type: ASTImport)\n  Generating: parse_phase_run (return type: ParsePhaseOutput)\n  Generating: eval (return type: int)\n  Generating: lex_phase_run (return type: LexPhaseOutput)\n  Generating: string_in_array (return type: bool)\n  Generating: collect_shadow_names (return type: array\u003cstring\u003e)\n  Generating: append_diags (return type: void)\n  Generating: lint_source (return type: List\u003cCompilerDiagnostic\u003e)\n  Generating: syntax_check_source (return type: List\u003cCompilerDiagnostic\u003e)\n  Generating: lint_file (return type: List\u003cCompilerDiagnostic\u003e)\n  Generating: syntax_check_file (return type: List\u003cCompilerDiagnostic\u003e)\n  Generating: lint_format (return type: string)\n  Generating: eval_internal (return type: int)\n  Generating: ansi_escape (return type: string)\n  Generating: html_entity_to_char (return type: string)\n  Generating: ansi_for_class (return type: string)\n  Generating: str_matches_at (return type: bool)\n  Generating: highlight_html_to_ansi (return type: string)\n  Generating: pretty_print_html (return type: string)\n  Generating: pretty_print_ansi (return type: string)\n  Generating: print_banner (return type: void)\n  Generating: print_help (return type: void)\n  Generating: wrap_expression (return type: string)\n  Generating: str_trim (return type: string)\n  Generating: is_command (return type: bool)\n  Generating: is_empty (return type: bool)\n  Generating: eval_expression (return type: int)\n  Generating: get_history_file (return type: string)\n  Generating: clear_screen (return type: void)\n  Generating: run_repl (return type: int)\n  Generating: main (return type: int)\n✓ Code generation complete!\nError: C compilation failed\nmake[6]: *** [Makefile:324: ../bin/simple_repl] Error 1\nmake[6]: Leaving directory '/home/jkh/Src/nanolang/examples'\nmake[5]: *** [Makefile.gnu:656: examples-stage1] Error 2\nmake[5]: Leaving directory '/home/jkh/Src/nanolang'\nmake[4]: *** [Makefile:56: examples-core] Error 2\nmake[4]: Leaving directory '/home/jkh/Src/nanolang'\nmake[3]: *** [Makefile.gnu:639: examples] Error 2\nmake[3]: Leaving directory '/home/jkh/Src/nanolang'\nmake[2]: *** [Makefile:47: examples] Error 2\nmake[2]: Leaving directory '/home/jkh/Src/nanolang'\n\n","notes":"[autotest] Seen again at 2026-02-19T09:04:42\nKind: examples\nName: make examples\nFingerprint: f79df7d8fd4f\n\n---\nLog tail: /home/jkh/Src/nanolang/.test_output/make_examples.log\n\nst_ASTIdentifier.o obj/runtime/list_ASTBinaryOp.o obj/runtime/list_ASTCall.o obj/runtime/list_ASTModuleQualifiedCall.o obj/runtime/list_ASTArrayLiteral.o obj/runtime/list_ASTLet.o obj/runtime/list_ASTSet.o obj/runtime/list_ASTStmtRef.o obj/runtime/list_ASTIf.o obj/runtime/list_ASTWhile.o obj/runtime/list_ASTFor.o obj/runtime/list_ASTReturn.o obj/runtime/list_ASTBlock.o obj/runtime/list_ASTUnsafeBlock.o obj/runtime/list_ASTPrint.o obj/runtime/list_ASTAssert.o obj/runtime/list_ASTFunction.o obj/runtime/list_ASTShadow.o obj/runtime/list_ASTStruct.o obj/runtime/list_ASTStructLiteral.o obj/runtime/list_ASTFieldAccess.o obj/runtime/list_ASTEnum.o obj/runtime/list_ASTUnion.o obj/runtime/list_ASTUnionConstruct.o obj/runtime/list_ASTMatch.o obj/runtime/list_ASTImport.o obj/runtime/list_ASTOpaqueType.o obj/runtime/list_ASTTupleLiteral.o obj/runtime/list_ASTTupleIndex.o obj/runtime/token_helpers.o obj/runtime/gc.o obj/runtime/dyn_array.o obj/runtime/gc_struct.o obj/runtime/nl_string.o obj/runtime/ffi_loader.o obj/runtime/cli.o obj/runtime/regex.o \\\n\tobj/nanovm/vmd_protocol.o obj/nanovm/vmd_client.o \\\n\tobj/nanovm/main.o -lm -rdynamic\ncc -Wall -Wextra -Werror -std=c99 -g -Isrc -D_GNU_SOURCE -c src/nanovm/cop_main.c -o obj/nanovm/cop_main.o\ncc -Wall -Wextra -Werror -std=c99 -g -Isrc -D_GNU_SOURCE -o bin/nano_cop obj/nanovm/value.o obj/nanovm/heap.o obj/nanovm/vm.o obj/nanovm/vm_ffi.o obj/nanovm/vm_builtins.o obj/nanovm/cop_protocol.o obj/nanoisa/isa.o obj/nanoisa/nvm_format.o obj/nanoisa/assembler.o obj/nanoisa/disassembler.o obj/nanoisa/verifier.o obj/lexer.o obj/parser.o obj/typechecker.o obj/transpiler.o obj/stdlib_runtime.o obj/env.o obj/builtins_registry.o obj/module.o obj/module_metadata.o obj/cJSON.o obj/toon_output.o obj/module_builder.o obj/resource_tracking.o obj/eval.o obj/eval/eval_hashmap.o obj/eval/eval_math.o obj/eval/eval_string.o obj/eval/eval_io.o obj/interpreter_ffi.o obj/json_diagnostics.o obj/reflection.o obj/nanocore_subset.o obj/nanocore_export.o obj/runtime/list_int.o obj/runtime/list_string.o obj/runtime/list_LexerToken.o obj/runtime/list_token.o obj/runtime/list_CompilerDiagnostic.o obj/runtime/list_CompilerSourceLocation.o obj/runtime/list_ASTNumber.o obj/runtime/list_ASTFloat.o obj/runtime/list_ASTString.o obj/runtime/list_ASTBool.o obj/runtime/list_ASTIdentifier.o obj/runtime/list_ASTBinaryOp.o obj/runtime/list_ASTCall.o obj/runtime/list_ASTModuleQualifiedCall.o obj/runtime/list_ASTArrayLiteral.o obj/runtime/list_ASTLet.o obj/runtime/list_ASTSet.o obj/runtime/list_ASTStmtRef.o obj/runtime/list_ASTIf.o obj/runtime/list_ASTWhile.o obj/runtime/list_ASTFor.o obj/runtime/list_ASTReturn.o obj/runtime/list_ASTBlock.o obj/runtime/list_ASTUnsafeBlock.o obj/runtime/list_ASTPrint.o obj/runtime/list_ASTAssert.o obj/runtime/list_ASTFunction.o obj/runtime/list_ASTShadow.o obj/runtime/list_ASTStruct.o obj/runtime/list_ASTStructLiteral.o obj/runtime/list_ASTFieldAccess.o obj/runtime/list_ASTEnum.o obj/runtime/list_ASTUnion.o obj/runtime/list_ASTUnionConstruct.o obj/runtime/list_ASTMatch.o obj/runtime/list_ASTImport.o obj/runtime/list_ASTOpaqueType.o obj/runtime/list_ASTTupleLiteral.o obj/runtime/list_ASTTupleIndex.o obj/runtime/token_helpers.o obj/runtime/gc.o obj/runtime/dyn_array.o obj/runtime/gc_struct.o obj/runtime/nl_string.o obj/runtime/ffi_loader.o obj/runtime/cli.o obj/runtime/regex.o \\\n\tobj/nanovm/cop_main.o -lm -rdynamic\n/bin/ld: obj/module.o: in function `compile_module_to_object':\n/home/jkh/Src/nanolang/src/module.c:1224:(.text+0x3a2c): undefined reference to `get_project_root'\ncollect2: error: ld returned 1 exit status\nmake[5]: *** [Makefile.gnu:334: nano_cop] Error 1\nmake[5]: Leaving directory '/home/jkh/Src/nanolang'\nmake[4]: *** [Makefile:56: examples-core] Error 2\nmake[4]: Leaving directory '/home/jkh/Src/nanolang'\nmake[3]: *** [Makefile.gnu:641: examples] Error 2\nmake[3]: Leaving directory '/home/jkh/Src/nanolang'\nmake[2]: *** [Makefile:47: examples] Error 2\nmake[2]: Leaving directory '/home/jkh/Src/nanolang'\n\n","status":"closed","priority":4,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-19T03:31:07Z","created_by":"Jordan Hubbard","updated_at":"2026-02-20T06:39:21Z","closed_at":"2026-02-20T06:39:21Z","close_reason":"Closed","labels":["autotest","examples"]}
{"id":"nl-pke","title":"Fix: -Wint-conversion warnings in generated C (return type / pointer-integer mismatches)","description":"Phase: C intermediate compilation (gcc/cc compiling /tmp/nanolang_temp.c)\n\nSeveral generated C functions have integer/pointer type mismatches. Most are secondary effects of -Wimplicit-function-declaration (undeclared function defaults to returning int, then that int is used as a pointer), but some are direct type errors in generated code.\n\nWarning subtypes:\n\n1. Return from undeclared function used as pointer (cascades from implicit-decl):\n   /tmp/nanolang_temp.c:484:12: warning: returning 'int' from a function with return type 'char *' makes pointer from integer without a cast [-Wint-conversion]\n     484 |     return path_relpath(nl_target, nl_base);\n   /tmp/nanolang_temp.c:1436:12: warning: assignment to 'DynArray *' from 'int' makes pointer from integer without a cast [-Wint-conversion]\n     1436 |     nl_raw = nl_os_process_run(nl_command);\n\n2. Direct int64_t / int returned where char* expected:\n   warning: initialization of 'char *' from 'int64_t' {aka 'long int'} makes pointer from integer without a cast [-Wint-conversion]\n   warning: initialization of 'char *' from 'int' makes pointer from integer without a cast [-Wint-conversion]\n   warning: returning 'int64_t' {aka 'long int'} from a function with return type 'char *' makes pointer from integer without a cast [-Wint-conversion]\n   warning: returning 'int' from a function with return type 'char *' makes pointer from integer without a cast [-Wint-conversion]\n\n3. nl_map_put third argument pointer/int confusion:\n   warning: passing argument 3 of 'nl_map_put' makes integer from pointer without a cast [-Wint-conversion]\n\nRoot cause: Mix of cascading implicit-declaration effects and NanoLang type system not fully distinguishing int vs string return types in some generated wrappers. Fixing the implicit-function-declaration warnings (nl-1pd, nl-s0h) will resolve most of these; remaining cases need investigation in the transpiler.","status":"open","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T19:46:46Z","created_by":"Jordan Hubbard","updated_at":"2026-02-21T19:46:46Z"}
{"id":"nl-s0h","title":"Fix: -Wimplicit-function-declaration for OS/process/env runtime externs in generated C","description":"Phase: C intermediate compilation (gcc/cc compiling /tmp/nanolang_temp.c)\n\nSeveral NanoLang stdlib OS/process/env functions are declared as extern in NanoLang but the corresponding C symbols are not visible in the generated C (missing includes or missing gen_c_runtime implementations).\n\nAffected functions:\n  nl_os_process_run        (returns array\u003cstring\u003e, but implicitly declared as int -\u003e DynArray* from int cast)\n  nl_os_process_spawn      (returns pid int)\n  nl_os_process_is_running (returns int)\n  nl_os_process_wait       (returns int)\n  nl_os_unsetenv           (returns int)\n  nl_env_get               (returns string)\n\nExample warning output:\n  /tmp/nanolang_temp.c:1436:14: warning: implicit declaration of function 'nl_os_process_run' [-Wimplicit-function-declaration]\n    1436 |     nl_raw = nl_os_process_run(nl_command);\n  /tmp/nanolang_temp.c:1436:12: warning: assignment to 'DynArray *' from 'int' makes pointer from integer without a cast [-Wint-conversion]\n  /tmp/nanolang_temp.c:1454:14: warning: implicit declaration of function 'nl_os_process_spawn'; did you mean 'nl_process_string'? [-Wimplicit-function-declaration]\n    1454 |     nl_pid = nl_os_process_spawn(nl_command);\n  /tmp/nanolang_temp.c:1461:17: warning: implicit declaration of function 'nl_os_process_is_running'; did you mean 'nl_process_string'? [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:1468:20: warning: implicit declaration of function 'nl_os_process_wait' [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:1489:15: warning: implicit declaration of function 'nl_os_unsetenv'; did you mean 'nl_os_setenv'? [-Wimplicit-function-declaration]\n  /tmp/nanolang_temp.c:6758:25: warning: implicit declaration of function 'nl_env_get'; did you mean 'nl_map_get'? [-Wimplicit-function-declaration]\n\nRoot cause: These functions are implemented in C module files (e.g. modules/std/process.c, modules/std/os.c) but the generated C preamble does not include the relevant headers. Also nl_os_process_run is missing from is_runtime_declared_extern in transpiler.nano.","status":"open","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T19:46:09Z","created_by":"Jordan Hubbard","updated_at":"2026-02-21T19:46:09Z"}
{"id":"nl-v77","title":"Fix: -Wincompatible-pointer-types HashMap generic type mismatch in generated C","description":"Phase: C intermediate compilation (gcc/cc compiling /tmp/nanolang_temp.c)\n\nThe NanoLang HashMap implementation uses C macros that instantiate typed structs (e.g. HashMap_string_string, HashMap_string_int). When NanoLang code passes a HashMap\u003cstring, int\u003e to a function expecting HashMap\u003cstring, string\u003e (or vice versa), the generated C produces incompatible pointer type warnings.\n\nExample warning output:\n  /tmp/nanolang_temp.c: warning: initialization of 'HashMap_string_string *' from incompatible pointer type 'HashMap_string_int *' [-Wincompatible-pointer-types]\n  /tmp/nanolang_temp.c: warning: passing argument 1 of 'nl_map_put' from incompatible pointer type [-Wincompatible-pointer-types]\n  /tmp/nanolang_temp.c: warning: passing argument 1 of 'nl_map_has' from incompatible pointer type [-Wincompatible-pointer-types]\n  /tmp/nanolang_temp.c: warning: passing argument 1 of 'nl_map_get' from incompatible pointer type [-Wincompatible-pointer-types]\n\nThese appear in the large merged compiler source (nanoc_integrated.nano / nanoc_stage2 output). \n\nRoot cause: NanoLang's type checker is not catching this mismatch at the NanoLang level, allowing it to silently pass through to C code generation where the C compiler catches it. The fix may require either:\n  (a) Strengthening NanoLang's type checker to reject HashMap\u003cK1,V1\u003e assigned to HashMap\u003cK2,V2\u003e, or\n  (b) Auditing the NanoLang source to find where the wrong map type is assigned/passed.","status":"open","priority":1,"issue_type":"bug","owner":"jordanhubbard@gmail.com","created_at":"2026-02-21T19:46:59Z","created_by":"Jordan Hubbard","updated_at":"2026-02-21T19:46:59Z"}
