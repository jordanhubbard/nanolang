# Example: OPL Validate Driver
# Purpose: Test driver that exercises OPL validation on sample input
# Features: imports, testing, validation integration
# Difficulty: Intermediate
# Category: opl
# Prerequisites: opl_validate
# Expected Output: none

import "examples/opl/opl_validate.nano"

module "modules/std/json/json.nano"

fn main() -> int {
    let r: Json = (opl_validate "agent a {\n  call web.search { query: \"x\" }\n}\n")
    if (as_bool (get r "ok")) {
        (free r)
        return 1
    } else {
        (free r)
        return 0
    }
}

shadow main {
    assert (== (main) 0)
}
