{"version":"opl-0.1","nodes":[{"kind":"block","blockType":"agent","name":"conditional_search","loc":{"line":3,"col":1},"body":[{"kind":"decl","declType":"doc","value":"Search only when query is non-empty","loc":{"line":4,"col":3}},{"kind":"decl","declType":"uses","value":{"ref":"web.search"},"loc":{"line":5,"col":3}},{"kind":"decl","declType":"input","value":[{"name":"query","type":{"t":"string"},"default":null,"loc":{"line":6,"col":3}},{"name":"max_results","type":{"t":"int"},"default":{"kind":"lit","v":10,"loc":{"line":6,"col":34}},"loc":{"line":6,"col":17}}],"loc":{"line":6,"col":3}},{"kind":"rule","ruleType":"when","cond":{"kind":"bin","op":"!=","a":{"kind":"id","name":"query","loc":{"line":8,"col":8}},"b":{"kind":"lit","v":"","loc":{"line":8,"col":17}},"loc":{"line":8,"col":14}},"actions":[{"kind":"call","ref":"web.search","args":{"query":{"kind":"id","name":"query","loc":{"line":8,"col":45}},"limit":{"kind":"id","name":"max_results","loc":{"line":8,"col":59}}},"as":"results","loc":{"line":8,"col":23}},{"kind":"emit","name":"results","expr":{"kind":"id","name":"results","loc":{"line":8,"col":95}},"loc":{"line":8,"col":83}}],"loc":{"line":8,"col":3}}]}]}