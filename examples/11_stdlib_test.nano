# Test new standard library functions: abs, min, max, println

fn test_abs() -> int {
    let a: int = (abs -5)
    let b: int = (abs 5)
    let c: int = (abs 0)
    return (+ (+ a b) c)
}

shadow test_abs {
    assert (== (test_abs) 10)
    assert (== (abs -42) 42)
    assert (== (abs 42) 42)
    assert (== (abs 0) 0)
}

fn test_min() -> int {
    let a: int = (min 5 3)
    let b: int = (min 10 20)
    let c: int = (min -5 -3)
    return (+ (+ a b) c)
}

shadow test_min {
    assert (== (test_min) 8)
    assert (== (min 5 3) 3)
    assert (== (min 10 20) 10)
    assert (== (min -5 -3) -5)
}

fn test_max() -> int {
    let a: int = (max 5 3)
    let b: int = (max 10 20)
    let c: int = (max -5 -3)
    return (+ (+ a b) c)
}

shadow test_max {
    assert (== (test_max) 22)
    assert (== (max 5 3) 5)
    assert (== (max 10 20) 20)
    assert (== (max -5 -3) -3)
}

fn main() -> int {
    (println "Testing stdlib functions...")
    
    (println "abs(-5) =")
    (println (abs -5))
    
    (println "min(10, 5) =")
    (println (min 10 5))
    
    (println "max(10, 5) =")
    (println (max 10 5))
    
    (println "All tests passed!")
    
    return 0
}

shadow main {
    assert (== (main) 0)
}

