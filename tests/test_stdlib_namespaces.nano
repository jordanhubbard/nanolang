/* Test stdlib namespace imports */

/* Test 1: Import from std::collections */
from "modules/std/collections/stringbuilder.nano" import StringBuilder, new, append, to_string

fn test_stringbuilder() -> bool {
    let sb: StringBuilder = (new)
    let sb2: StringBuilder = (append sb "Hello Namespace!")
    let result: string = (to_string sb2)
    return (str_equals result "Hello Namespace!")
}

shadow test_stringbuilder {
    assert (== (test_stringbuilder) true)
}

/* Test 2: Import from std::io */
from "modules/std/io/stdio.nano" import file_exists, FILE_MODE_READ

fn test_io() -> bool {
    /* file_exists should return false for non-existent files */
    return (== (file_exists "/nonexistent_test_file_xyz") false)
}

shadow test_io {
    assert (== (test_io) true)
}

/* Test 3: Import from std::math */
from "modules/std/math/extended.nano" import PI, E, clamp

fn test_math() -> bool {
    let clamped: float = (clamp 5.0 0.0 10.0)
    return (== clamped 5.0)
}

shadow test_math {
    assert (== (test_math) true)
}

/* Test 4: Import from std::math::vector2d */
from "modules/std/math/vector2d.nano" import Vector2D, vec_new, vec_add, vec_length

fn test_vector2d() -> bool {
    let v1: Vector2D = (vec_new 3.0 4.0)
    let v2: Vector2D = (vec_new 1.0 2.0)
    let sum: Vector2D = (vec_add v1 v2)
    return (== sum.x 4.0)
}

shadow test_vector2d {
    assert (== (test_vector2d) true)
}

/* Main test runner */
fn main() -> int {
    (println "=== Testing stdlib namespace imports ===")
    
    (print "Test 1 (StringBuilder): ")
    if (test_stringbuilder) {
        (println "✅ PASSED")
    } else {
        (println "❌ FAILED")
        return 1
    }
    
    (print "Test 2 (I/O): ")
    if (test_io) {
        (println "✅ PASSED")
    } else {
        (println "❌ FAILED")
        return 1
    }
    
    (print "Test 3 (Math): ")
    if (test_math) {
        (println "✅ PASSED")
    } else {
        (println "❌ FAILED")
        return 1
    }
    
    (print "Test 4 (Vector2D): ")
    if (test_vector2d) {
        (println "✅ PASSED")
    } else {
        (println "❌ FAILED")
        return 1
    }
    
    (println "")
    (println "✅ All namespace import tests passed!")
    return 0
}

shadow main {
    assert (== (main) 0)
}

