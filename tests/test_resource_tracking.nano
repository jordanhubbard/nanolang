/* Test resource tracking infrastructure */

resource struct FileHandle {
    fd: int
}

fn create_file() -> FileHandle {
    return FileHandle { fd: 42 }
}

fn close_file(f: FileHandle) -> void {
    /* This function consumes the FileHandle */
    (println "File closed")
}

fn main() -> int {
    (println "Testing resource tracking infrastructure")
    
    /* Create a resource */
    let f: FileHandle = (create_file)
    
    /* Use the resource */
    (close_file f)
    
    (println "Resource tracking test passed!")
    return 0
}

shadow main {
    assert (== (main) 0)
}

