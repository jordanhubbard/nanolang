extern fn get_argc() -> int

fn argc_safe() -> int {
    let mut n: int = 0
    unsafe {
        set n (get_argc)
    }
    return n
}

shadow argc_safe {
    let n: int = (argc_safe)
    assert (> n 0)
}

fn main() -> int {
    assert (> (argc_safe) 0)
    return 0
}

shadow main { assert true }
