/* Test: extended math functions - exp2, log2, hypot, cbrt, copysign */
from "std/math/extended.nano" import exp2, log2, log1p, expm1, cbrt, hypot, copysign

let EPS: float = 0.00001

fn approx(a: float, b: float) -> bool {
    return (< (abs (- a b)) EPS)
}

shadow approx {
    assert (approx 1.0 1.0)
    assert (== (approx 1.0 1.1) false)
}

fn test_extended_math() -> int {
    assert (approx (exp2 3.0) 8.0)
    assert (approx (log2 8.0) 3.0)
    assert (approx (hypot 3.0 4.0) 5.0)
    assert (approx (cbrt 27.0) 3.0)
    assert (approx (copysign 1.0 (- 2.0)) (- 1.0))
    assert (approx (log1p 0.0) 0.0)
    assert (approx (expm1 0.0) 0.0)
    return 0
}

shadow test_extended_math {
    assert (== (test_extended_math) 0)
}

fn main() -> int { return 0 }

shadow main {
    assert (== (main) 0)
}
