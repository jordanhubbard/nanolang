# Test more complex nested arrays

fn test_nested_matrix() -> int {
    # Create a 2x3 matrix
    let mut row1: array<int> = []
    set row1 (array_push row1 1)
    set row1 (array_push row1 2)
    set row1 (array_push row1 3)
    
    let mut row2: array<int> = []
    set row2 (array_push row2 4)
    set row2 (array_push row2 5)
    set row2 (array_push row2 6)
    
    let mut matrix: array<array<int>> = []
    set matrix (array_push matrix row1)
    set matrix (array_push matrix row2)
    
    # Access matrix[1][2] (should be 6)
    let second_row: array<int> = (at matrix 1)
    let value: int = (at second_row 2)
    
    return value
}

fn main() -> int {
    (println "Testing nested array matrix...")
    let result: int = (test_nested_matrix)
    (print "matrix[1][2] = ")
    (println result)
    
    if (== result 6) {
        (println "✅ Nested arrays work!")
        return 0
    } else {
        (println "❌ Test failed")
        return 1
    }
}
