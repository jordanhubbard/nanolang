# Test file to exercise stdlib/std/math/vector4d.nano for coverage

from "std/math/vector4d.nano" import Vector4D, vec4_new, vec4_zero, vec4_add, vec4_dot, vec4_length, vec4_normalize

fn test_vector4d_basic() -> bool {
    let v1: Vector4D = (vec4_new 1.0 2.0 3.0 4.0)
    let v2: Vector4D = (vec4_new 5.0 6.0 7.0 8.0)
    
    # Test addition
    let sum: Vector4D = (vec4_add v1 v2)
    if (!= sum.x 6.0) {
        return false
    } else {}
    
    # Test dot product
    let dot: float = (vec4_dot v1 v2)
    if (!= dot 70.0) {
        return false
    } else {}
    
    return true
}

fn test_vector4d_length() -> bool {
    let v: Vector4D = (vec4_new 2.0 0.0 0.0 0.0)
    let len: float = (vec4_length v)
    
    if (!= len 2.0) {
        return false
    } else {}
    
    return true
}

fn test_vector4d_normalize() -> bool {
    let v: Vector4D = (vec4_new 4.0 0.0 0.0 0.0)
    let n: Vector4D = (vec4_normalize v)
    
    if (!= n.x 1.0) {
        return false
    } else {}
    
    return true
}

shadow test_vector4d_basic {
    assert (test_vector4d_basic)
}

shadow test_vector4d_length {
    assert (test_vector4d_length)
}

shadow test_vector4d_normalize {
    assert (test_vector4d_normalize)
}

fn main() -> int {
    if (not (test_vector4d_basic)) {
        return 1
    } else {}
    
    if (not (test_vector4d_length)) {
        return 1
    } else {}
    
    if (not (test_vector4d_normalize)) {
        return 1
    } else {}
    
    return 0
}

shadow main {
    assert (== (main) 0)
}

