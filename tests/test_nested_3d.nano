# Test 3D arrays (3 levels of nesting)

fn test_3d_array() -> int {
    # Create a 3D array: 2x2x2 cube
    let mut cube: array<array<array<int>>> = []
    
    # Layer 0
    let mut layer0: array<array<int>> = []
    let mut row00: array<int> = []
    set row00 (array_push row00 1)
    set row00 (array_push row00 2)
    let mut row01: array<int> = []
    set row01 (array_push row01 3)
    set row01 (array_push row01 4)
    set layer0 (array_push layer0 row00)
    set layer0 (array_push layer0 row01)
    
    # Layer 1
    let mut layer1: array<array<int>> = []
    let mut row10: array<int> = []
    set row10 (array_push row10 5)
    set row10 (array_push row10 6)
    let mut row11: array<int> = []
    set row11 (array_push row11 7)
    set row11 (array_push row11 8)
    set layer1 (array_push layer1 row10)
    set layer1 (array_push layer1 row11)
    
    # Build cube
    set cube (array_push cube layer0)
    set cube (array_push cube layer1)
    
    # Access cube[1][1][0] should be 7
    let layer: array<array<int>> = (at cube 1)
    let row: array<int> = (at layer 1)
    let value: int = (at row 0)
    
    return value
}

fn main() -> int {
    (println "Testing 3D arrays (3 levels of nesting)...")
    
    let result: int = (test_3d_array)
    (print "cube[1][1][0] = ")
    (println result)
    
    if (== result 7) {
        (println "✅ 3D arrays work!")
        return 0
    } else {
        (println "❌ Test failed")
        return 1
    }
}
